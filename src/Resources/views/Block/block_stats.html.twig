{#

This file is part of the Sonata package.

(c) Thomas Rabaix <thomas.rabaix@sonata-project.org>

For the full copyright and license information, please view the LICENSE
file that was distributed with this source code.

#}

{% extends sonata_block.templates.block_base %}

{% set translation_domain = settings.translation_domain ?? admin.translationDomain %}

{% block block %}
    <!-- small box -->
    <div class="small-box {{ settings.color }}">
        <div class="inner">
            {# NEXT_MAJOR: remove the attribute check and just use .countResults() #}
            <h3>{{ attribute(pager, 'countResults') is defined ? pager.countResults() : pager.getNbResults() }}</h3>
            <p>
                {% if translation_domain %}
                    {# NEXT_MAJOR: remove the attribute check and just use .countResults() #}
                    {{ settings.text|trans({'%count%': attribute(pager, 'countResults') is defined ? pager.countResults() : pager.getNbResults()}, translation_domain) }}
                {% else %}
                    {{ settings.text }}
                {% endif %}
            </p>
        </div>
        <div class="icon">
            {{ settings.icon|parse_icon|raw }}
        </div>
        <a href="{{ admin.generateUrl('list', {filter: settings.filters}) }}" class="small-box-footer">
            {{ 'stats_view_more'|trans({}, 'SonataAdminBundle') }} <i class="fa fa-arrow-circle-right" aria-hidden="true"></i>
        </a>
    </div>
{% endblock %}
